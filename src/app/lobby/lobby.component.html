<div>
  <div class="background-image"></div>
  <mat-sidenav-container fullscreen class="container">
    <mat-sidenav mode="side" position="end" class="sidenav players" [opened]="true">
      <app-lobby-viewer [lobby]="selectedLobby" [hide]="hideViewer"></app-lobby-viewer>
    </mat-sidenav>

    <mat-sidenav-content class="lobby-container">
      <div class="lobby">
        <app-header [showLobbyButtons]="true"></app-header>
      </div>

      <div class="lobbies-cont">
        <table mat-table [dataSource]="dataSource" multiTemplateDataRows>
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef> Lobby </th>
            <td mat-cell *matCellDef="let lobby"><span *ngIf="lobby.creatorId === _user.user.id" class="lobbies-delete"
                (click)="deleteLobby($event, lobby)">X</span> {{lobby.runData.name}}</td>
          </ng-container>
          <ng-container matColumnDef="mode">
            <th mat-header-cell *matHeaderCellDef> Mode </th>
            <td mat-cell *matCellDef="let lobby"> {{runMode[lobby.runData.mode]}}</td>
          </ng-container>
          <ng-container matColumnDef="category">
            <th mat-header-cell *matHeaderCellDef> Category </th>
            <td mat-cell *matCellDef="let lobby"> {{categoryOptions[lobby.runData.category].displayName}} </td>
          </ng-container>
          <ng-container matColumnDef="teams">
            <th mat-header-cell *matHeaderCellDef> Teams </th>
            <td mat-cell *matCellDef="let lobby"> {{lobby.runData.teams}} </td>
          </ng-container>
          <ng-container matColumnDef="players">
            <th mat-header-cell *matHeaderCellDef> In Lobby </th>
            <td mat-cell *matCellDef="let lobby"> {{lobby.users.length}} </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="columns"></tr>
          <tr mat-row *matRowDef="let lobby; columns: columns;" class="run-row" (click)="routeToRun(lobby)"
            (mouseleave)="hideLobbyViewer()" (mouseenter)="selectLobby(lobby)"></tr>
        </table>

        <div *ngIf="unavaliableLobbies.length !== 0" class="lobbies-old">
          <h2>Unavailable (Version Missmatch)</h2>
          <table mat-table [dataSource]="dataSourceUnavailable" multiTemplateDataRows>
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef> Lobby </th>
              <td mat-cell *matCellDef="let lobby"> {{lobby.runData.name}}</td>
            </ng-container>
            <ng-container matColumnDef="mode">
              <th mat-header-cell *matHeaderCellDef> Mode </th>
              <td mat-cell *matCellDef="let lobby"> {{runMode[lobby.runData.mode]}}</td>
            </ng-container>
            <ng-container matColumnDef="category">
              <th mat-header-cell *matHeaderCellDef> Category </th>
              <td mat-cell *matCellDef="let lobby"> {{categoryOptions[lobby.runData.category].displayName}} </td>
            </ng-container>
            <ng-container matColumnDef="teams">
              <th mat-header-cell *matHeaderCellDef> Teams </th>
              <td mat-cell *matCellDef="let lobby"> {{lobby.runData.teams}} </td>
            </ng-container>
            <ng-container matColumnDef="players">
              <th mat-header-cell *matHeaderCellDef> In Lobby </th>
              <td mat-cell *matCellDef="let lobby"> {{lobby.users.length}} </td>
            </ng-container>
  
            <tr mat-row *matRowDef="let lobby; columns: columns;" class="run-row" (mouseleave)="hideLobbyViewer()" (mouseenter)="selectLobby(lobby)"></tr>
          </table>
        </div>

      </div>

      <div class="backtext">
        <h1>Lobby</h1>
      </div>
      <p id="name" class="text-in-background" [title]="_user.user.name">{{ _user.user.name }}</p>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>